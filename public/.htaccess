RewriteEngine On

RewriteRule ^index\.php$ - [L]

RewriteRule ^([^/]+)/?$ /index.php?controller=$1 [L,QSA]

RewriteRule ^([^/]+)/([^/]+)/?$ /index.php?controller=$1&action=$2 [L,QSA]

RewriteRule ^([^/]+)/([^/]+)/([0-9]+)/?$ /index.php?controller=$1&action=$2&id=$3 [L,QSA]